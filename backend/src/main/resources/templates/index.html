<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart List</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        body {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .header-content {
            display: flex;
            width: 100%;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            cursor: pointer;
            color: #2c3e50;
            font-size: 24px;
            text-decoration: none;
        }

        .logo:hover {
            color: #3498db;
        }

        .search-bar {
            display: flex;
            align-items: center;
            margin: 0 20px;
            flex-grow: 1;
            max-width: 500px;
        }

        .search-bar input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
        }

        .search-bar button {
            padding: 10px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
        }

        .search-bar button:hover {
            background-color: #2980b9;
        }

        .add-note-btn {
            padding: 10px 15px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }

        .add-note-btn:hover {
            background-color: #27ae60;
        }

        .note-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 10px;
        }

        .note-actions button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            padding: 5px;
        }

        .edit-btn {
            color: #3498db;
        }

        .delete-btn {
            color: #e74c3c;
        }

        .note-list {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .note-list ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .note-item {
            background: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .note-meta {
            margin-top: 10px;
            color: #7f8c8d;
            font-size: 14px;
        }

        .no-notes {
            text-align: center;
            color: #7f8c8d;
            margin-top: 50px;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 100%;
            max-width: 500px;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .counter {
            display: flex;
            align-items: center;
        }

        .counter button {
            padding: 5px 10px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .counter span {
            margin: 0 10px;
            min-width: 30px;
            text-align: center;
        }

        .submit-btn {
            padding: 10px 15px;
            background: #2ecc71;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
        }

        .submit-btn:hover {
            background: #27ae60;
        }
    </style>
</head>
<body>
<div class="header">
    <div class="header-content">
        <a href="/" class="logo">Smart List</a>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –∑–∞–º–µ—Ç–æ–∫...">
            <button onclick="searchNotes()">–ü–æ–∏—Å–∫</button>
        </div>
        <a href="#" class="add-note-btn" onclick="openModal(); return false;">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</a>
    </div>
</div>

<div class="note-list" id="noteList">
    <!-- –ó–∞–º–µ—Ç–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
</div>

<!-- –û–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
<div class="modal-overlay" id="addModal">
    <div class="modal">
        <button class="close-btn" onclick="closeModal('addModal')">√ó</button>
        <h2>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</h2>
        <form id="addForm" onsubmit="handleAddSubmit(event)">
            <div class="form-group">
                <label for="addTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="addTitle" required>
            </div>
            <div class="form-group">
                <label for="addDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="addDescription"></textarea>
            </div>
            <div class="form-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à—Ç—É–∫</label>
                <div class="counter">
                    <button type="button" onclick="changeCount('addCount', -1)">-</button>
                    <span id="addCount">0</span>
                    <button type="button" onclick="changeCount('addCount', 1)">+</button>
                </div>
            </div>
            <button type="submit" class="submit-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
        </form>
    </div>
</div>

<!-- –û–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div class="modal-overlay" id="editModal">
    <div class="modal">
        <button class="close-btn" onclick="closeModal('editModal')">√ó</button>
        <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫—É</h2>
        <form id="editForm" onsubmit="handleEditSubmit(event)">
            <div class="form-group">
                <label for="editTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="editTitle" required>
            </div>
            <div class="form-group">
                <label for="editDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="editDescription"></textarea>
            </div>
            <div class="form-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à—Ç—É–∫</label>
                <div class="counter">
                    <button type="button" onclick="changeCount('editCount', -1)">-</button>
                    <span id="editCount">0</span>
                    <button type="button" onclick="changeCount('editCount', 1)">+</button>
                </div>
            </div>
            <button type="submit" class="submit-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </form>
    </div>
</div>

<script>
    // JavaScript (–∑–∞–º–µ–Ω–∏—Ç–µ –≤–µ—Å—å –≤–∞—à —Ç–µ–∫—É—â–∏–π —Å–∫—Ä–∏–ø—Ç —ç—Ç–∏–º –∫–æ–¥–æ–º)
let currentEditingId = null;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
document.addEventListener('DOMContentLoaded', function() {
    loadNotes();

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–æ—Ä–º
    document.getElementById('addForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveNote(false);
    });

    document.getElementById('editForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveNote(true);
    });
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–º–µ—Ç–æ–∫
function loadNotes() {
    fetch('/api/notes')
        .then(response => response.json())
        .then(notes => {
            const noteList = document.getElementById('noteList');
            noteList.innerHTML = '';

            if (!notes || notes.length === 0) {
                noteList.innerHTML = '<p class="no-notes">–ó–∞–º–µ—Ç–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>';
                return;
            }

            const ul = document.createElement('ul');
            notes.forEach(note => {
                const li = document.createElement('li');
                li.className = 'note-item';
                li.innerHTML = `
                    <h3>${note.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</h3>
                    <p>${note.description || ''}</p>
                    <div class="note-meta">
                        <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${note.count || 0}</span>
                        <div class="note-actions">
                            <button class="edit-btn" onclick="editNote('${note.id}')">‚úèÔ∏è</button>
                            <button class="delete-btn" onclick="deleteNote('${note.id}')">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
                ul.appendChild(li);
            });
            noteList.appendChild(ul);
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('noteList').innerHTML = '<p class="no-notes">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
        });
}

// –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
function deleteNote(noteId) {
    if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–º–µ—Ç–∫—É?')) return;

    fetch(`/api/notes/${noteId}`, {
        method: 'DELETE',
        headers: { 'Content-Type': 'application/json' }
    })
    .then(response => {
        if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è');
        loadNotes();
    })
    .catch(error => {
        console.error('Error:', error);
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: ' + error.message);
    });
}

// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
function editNote(noteId) {
    fetch(`/api/notes/${noteId}`)
        .then(response => response.json())
        .then(note => {
            currentEditingId = note.id;
            document.getElementById('editTitle').value = note.title;
            document.getElementById('editDescription').value = note.description || '';
            document.getElementById('editCount').textContent = note.count || 0;
            openModal('editModal');
        })
        .catch(error => {
            console.error('Error:', error);
            alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–º–µ—Ç–∫—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
        });
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
function saveNote(isEdit) {
    const prefix = isEdit ? 'edit' : 'add';
    const noteData = {
        title: document.getElementById(`${prefix}Title`).value,
        description: document.getElementById(`${prefix}Description`).value,
        count: parseInt(document.getElementById(`${prefix}Count`).textContent)
    };

    const url = isEdit ? `/api/notes/${currentEditingId}` : '/api/notes';
    const method = isEdit ? 'PUT' : 'POST';

    fetch(url, {
        method: method,
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(noteData)
    })
    .then(response => {
        if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
        return response.json();
    })
    .then(() => {
        closeModal(isEdit ? 'editModal' : 'addModal');
        resetForm(isEdit ? 'editForm' : 'addForm');
        loadNotes();
        alert(isEdit ? '–ó–∞–º–µ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!' : '–ó–∞–º–µ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
    })
    .catch(error => {
        console.error('Error:', error);
        alert('–û—à–∏–±–∫–∞: ' + error.message);
    });
}

// –ü–æ–∏—Å–∫ –∑–∞–º–µ—Ç–æ–∫
function searchNotes() {
    const query = document.getElementById('searchInput').value.trim();
    if (!query) {
        loadNotes();
        return;
    }

    fetch(`/api/notes/search?name=${encodeURIComponent(query)}`)
        .then(response => response.json())
        .then(notes => {
            const noteList = document.getElementById('noteList');
            noteList.innerHTML = '';

            if (!notes || notes.length === 0) {
                noteList.innerHTML = '<p class="no-notes">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>';
                return;
            }

            const ul = document.createElement('ul');
            notes.forEach(note => {
                const li = document.createElement('li');
                li.className = 'note-item';
                li.innerHTML = `
                    <h3>${note.title}</h3>
                    <p>${note.description || ''}</p>
                    <div class="note-meta">
                        <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${note.count || 0}</span>
                        <div class="note-actions">
                            <button class="edit-btn" onclick="editNote('${note.id}')">‚úèÔ∏è</button>
                            <button class="delete-btn" onclick="deleteNote('${note.id}')">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
                ul.appendChild(li);
            });
            noteList.appendChild(ul);
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('noteList').innerHTML = '<p class="no-notes">–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞</p>';
        });
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function openModal(modalId) {
    document.getElementById(modalId).style.display = 'flex';
}

function closeModal(modalId) {
    document.getElementById(modalId).style.display = 'none';
}

function changeCount(elementId, delta) {
    const element = document.getElementById(elementId);
    let count = parseInt(element.textContent);
    count = Math.max(0, count + delta);
    element.textContent = count;
}

function resetForm(formId) {
    const prefix = formId === 'editForm' ? 'edit' : 'add';
    document.getElementById(`${prefix}Title`).value = '';
    document.getElementById(`${prefix}Description`).value = '';
    document.getElementById(`${prefix}Count`).textContent = '0';
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è Enter –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
document.getElementById('searchInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        searchNotes();
    }
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏
document.querySelector('.add-note-btn').addEventListener('click', function(e) {
    e.preventDefault();
    openModal('addModal');
});

<!--    // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–º–µ—Ç–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        loadNotes();-->
<!--    });-->

<!--        function loadNotes() {-->
<!--            fetch('/api/notes')-->
<!--                .then(response => response.json())-->
<!--                .then(notes => {-->
<!--                    const noteList = document.getElementById('noteList');-->
<!--                    noteList.innerHTML = '';-->

<!--                    if (!notes || notes.length === 0) {-->
<!--                        noteList.innerHTML = '<p class="no-notes">–ó–∞–º–µ—Ç–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>';-->
<!--                        return;-->
<!--                    }-->

<!--                    const ul = document.createElement('ul');-->
<!--                    notes.forEach(note => {-->
<!--                        const li = document.createElement('li');-->
<!--                        li.className = 'note-item';-->
<!--                        li.innerHTML = `-->
<!--                            <h3>${note.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</h3>-->
<!--                            <p>${note.description || ''}</p>-->
<!--                            <div class="note-meta">-->
<!--                                <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${note.count || 0}</span>-->
<!--                                <div class="note-actions">-->
<!--                                    <button class="edit-btn" onclick="editNote('${note.id}')">‚úèÔ∏è</button>-->
<!--                                    <button class="delete-btn" onclick="deleteNote('${note.id}')">üóëÔ∏è</button>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        `;-->
<!--                        ul.appendChild(li);-->
<!--                    });-->
<!--                    noteList.appendChild(ul);-->
<!--                })-->
<!--                .catch(error => {-->
<!--                    console.error('Error loading notes:', error);-->
<!--                    document.getElementById('noteList').innerHTML = '<p class="no-notes">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';-->
<!--                });-->
<!--        }-->

<!--function deleteNote(noteId) {-->
<!--    if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–º–µ—Ç–∫—É?')) return;-->

<!--    fetch(`/api/notes/${noteId}`, {-->
<!--        method: 'DELETE',-->
<!--        headers: {-->
<!--            'Content-Type': 'application/json'-->
<!--        }-->
<!--    })-->
<!--    .then(response => {-->
<!--        if (!response.ok) {-->
<!--            return response.text().then(text => { throw new Error(text) });-->
<!--        }-->
<!--        loadNotes(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è-->
<!--    })-->
<!--    .catch(error => {-->
<!--        console.error('Delete error:', error);-->
<!--        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: ' + error.message);-->
<!--    });-->
<!--}-->

<!--let currentEditingNote = null;-->

<!--function editNote(noteId) {-->
<!--    fetch(`/api/notes/${noteId}`)-->
<!--        .then(response => response.json())-->
<!--        .then(note => {-->
<!--            currentEditingNote = note;-->
<!--            document.getElementById('title').value = note.title;-->
<!--            document.getElementById('description').value = note.description || '';-->
<!--            document.getElementById('count').textContent = note.count || 0;-->
<!--            document.querySelector('.modal h2').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫—É';-->
<!--            openModal();-->
<!--        })-->
<!--        .catch(error => {-->
<!--            console.error('Error loading note:', error);-->
<!--            alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–º–µ—Ç–∫—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');-->
<!--        });-->
<!--}-->

<!--function submitNoteForm(event) {-->
<!--    event.preventDefault();-->

<!--    const noteData = {-->
<!--        title: document.getElementById('title').value,-->
<!--        description: document.getElementById('description').value,-->
<!--        count: parseInt(document.getElementById('count').textContent)-->
<!--    };-->

<!--    const url = currentEditingNote-->
<!--        ? `/api/notes/${currentEditingNote.id}`-->
<!--        : '/api/notes';-->

<!--    const method = currentEditingNote ? 'PUT' : 'POST';-->

<!--    fetch(url, {-->
<!--        method: method,-->
<!--        headers: {-->
<!--            'Content-Type': 'application/json',-->
<!--        },-->
<!--        body: JSON.stringify(noteData)-->
<!--    })-->
<!--    .then(response => {-->
<!--        if (!response.ok) {-->
<!--            return response.text().then(text => { throw new Error(text) });-->
<!--        }-->
<!--        closeModal();-->
<!--        resetNoteForm();-->
<!--        loadNotes();-->
<!--    })-->
<!--    .catch(error => {-->
<!--        console.error('Save error:', error);-->
<!--        alert('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + error.message);-->
<!--    });-->
<!--}-->

<!--function resetNoteForm() {-->
<!--    currentEditingNote = null;-->
<!--    document.getElementById('title').value = '';-->
<!--    document.getElementById('description').value = '';-->
<!--    document.getElementById('count').textContent = '0';-->
<!--    document.querySelector('.modal h2').textContent = '–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É';-->
<!--}-->

<!--    function searchNotes() {-->
<!--        const query = document.getElementById('searchInput').value.trim();-->
<!--        if (!query) {-->
<!--            loadNotes();-->
<!--            return;-->
<!--        }-->

<!--        fetch(`/api/notes/search?name=${encodeURIComponent(query)}`)-->
<!--            .then(response => response.json())-->
<!--            .then(notes => {-->
<!--                const noteList = document.getElementById('noteList');-->
<!--                if (notes.length === 0) {-->
<!--                    noteList.innerHTML = '<p class="no-notes">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>';-->
<!--                    return;-->
<!--                }-->

<!--                let html = '<ul>';-->
<!--                notes.forEach(note => {-->
<!--                    html += `-->
<!--                        <li class="note-item">-->
<!--                            <h3>${note.title}</h3>-->
<!--                            <p>${note.description}</p>-->
<!--                            <div class="note-meta">-->
<!--                                <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${note.count}</span>-->
<!--                            </div>-->
<!--                        </li>-->
<!--                    `;-->
<!--                });-->
<!--                html += '</ul>';-->
<!--                noteList.innerHTML = html;-->
<!--            })-->
<!--            .catch(error => {-->
<!--                console.error('Error searching notes:', error);-->
<!--                document.getElementById('noteList').innerHTML = '<p class="no-notes">–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞</p>';-->
<!--            });-->
<!--    }-->

<!--    function openModal() {-->
<!--        document.getElementById('modalOverlay').style.display = 'flex';-->
<!--    }-->

<!--    function closeModal() {-->
<!--        document.getElementById('modalOverlay').style.display = 'none';-->
<!--    }-->

<!--    function changeCount(delta) {-->
<!--        const countElement = document.getElementById('count');-->
<!--        let count = parseInt(countElement.textContent);-->
<!--        count += delta;-->
<!--        if (count < 0) count = 0;-->
<!--        countElement.textContent = count;-->
<!--    }-->

<!--        // –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ addNote –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è-->
<!--        function addNote(event) {-->
<!--            event.preventDefault();-->

<!--            const noteData = {-->
<!--                title: document.getElementById('title').value,-->
<!--                description: document.getElementById('description').value,-->
<!--                count: parseInt(document.getElementById('count').textContent)-->
<!--            };-->

<!--            const url = currentEditId ? `/api/notes/${currentEditId}` : '/api/notes';-->
<!--            const method = currentEditId ? 'PUT' : 'POST';-->

<!--            fetch(url, {-->
<!--                method: method,-->
<!--                headers: { 'Content-Type': 'application/json' },-->
<!--                body: JSON.stringify(noteData)-->
<!--            })-->
<!--            .then(response => {-->
<!--                if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');-->
<!--                closeModal();-->
<!--                loadNotes();-->
<!--                resetForm();-->
<!--            })-->
<!--            .catch(error => {-->
<!--                console.error('Save error:', error);-->
<!--                alert('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + error.message);-->
<!--            });-->
<!--        }-->

<!--        function resetForm() {-->
<!--            currentEditId = null;-->
<!--            document.getElementById('title').value = '';-->
<!--            document.getElementById('description').value = '';-->
<!--            document.getElementById('count').textContent = '0';-->
<!--            document.querySelector('.modal h2').textContent = '–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É';-->
<!--        }-->
<!--        let currentNoteId = null; // –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–µ–∂–∏–º–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)-->

<!--// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã-->
<!--document.getElementById('noteForm').addEventListener('submit', function(e) {-->
<!--    e.preventDefault();-->
<!--    saveNote();-->
<!--});-->

<!--// –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è-->
<!--function saveNote() {-->
<!--    const noteData = {-->
<!--        title: document.getElementById('title').value,-->
<!--        description: document.getElementById('description').value,-->
<!--        count: parseInt(document.getElementById('count').textContent)-->
<!--    };-->

<!--    const url = currentNoteId ? `/api/notes/${currentNoteId}` : '/api/notes';-->
<!--    const method = currentNoteId ? 'PUT' : 'POST';-->

<!--    fetch(url, {-->
<!--        method: method,-->
<!--        headers: {-->
<!--            'Content-Type': 'application/json',-->
<!--        },-->
<!--        body: JSON.stringify(noteData)-->
<!--    })-->
<!--    .then(response => {-->
<!--        if (!response.ok) {-->
<!--            return response.json().then(err => { throw new Error(err.message || '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞') });-->
<!--        }-->
<!--        return response.json();-->
<!--    })-->
<!--    .then(() => {-->
<!--        closeModal();-->
<!--        resetForm();-->
<!--        loadNotes();-->
<!--        alert(currentNoteId ? '–ó–∞–º–µ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!' : '–ó–∞–º–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!');-->
<!--    })-->
<!--    .catch(error => {-->
<!--        console.error('Save error:', error);-->
<!--        alert('–û—à–∏–±–∫–∞: ' + error.message);-->
<!--    });-->
<!--}-->

<!--// –§—É–Ω–∫—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è-->
<!--function editNote(noteId) {-->
<!--    fetch(`/api/notes/${noteId}`)-->
<!--        .then(response => response.json())-->
<!--        .then(note => {-->
<!--            currentNoteId = note.id;-->
<!--            document.getElementById('title').value = note.title;-->
<!--            document.getElementById('description').value = note.description || '';-->
<!--            document.getElementById('count').textContent = note.count || 0;-->
<!--            document.querySelector('.modal h2').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫—É';-->
<!--            openModal();-->
<!--        });-->
<!--}-->

<!--// –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã-->
<!--function resetForm() {-->
<!--    currentNoteId = null;-->
<!--    document.getElementById('title').value = '';-->
<!--    document.getElementById('description').value = '';-->
<!--    document.getElementById('count').textContent = '0';-->
<!--    document.querySelector('.modal h2').textContent = '–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É';-->
<!--}-->

<!--    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è Enter –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞-->
<!--    document.getElementById('searchInput').addEventListener('keypress', function(e) {-->
<!--        if (e.key === 'Enter') {-->
<!--            searchNotes();-->
<!--        }-->
<!--    });-->
</script>
</body>
</html>
